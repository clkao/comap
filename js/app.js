function import$(t,e){var o={}.hasOwnProperty;for(var a in e)o.call(e,a)&&(t[a]=e[a]);return t}require.register("config.jsenv",function(t,e,o){o.exports={BUILD:"git-06aba32"}}),angular.module("App",["app.templates","ngMaterial","ui.router","comap","leaflet-directive"]).config(["$stateProvider","$urlRouterProvider","$locationProvider"].concat(function(t,e,o){return t.state("about",{url:"/about",templateUrl:"app/partials/about.html",controller:"About"}).state("comap",{url:"/comap",templateUrl:"app/partials/comap.html",controller:"CoMapCtrl"}),e.otherwise("/about"),o.html5Mode(!0)})).run(["$rootScope","$state","$stateParams","$location","$window","$anchorScroll"].concat(function(t,e,o,a){return t.$state=e,t.$stateParam=o,t.config_build=require("config.jsenv").BUILD,t.$on("$stateChangeSuccess",function(t,e){var o;return o=e.name,"undefined"!=typeof window&&null!==window&&"function"==typeof window.ga?window.ga("send","pageview",{page:a.$$path,title:o}):void 0})})).controller({AppCtrl:["$scope","$location","$rootScope","$sce"].concat(function(t,e){return t.$location=e,t.$watch("$location.path()",function(e){return e||(e="/"),t.activeNavId=e,t}),t.getClass=function(e){return t.activeNavId.substring(0,e.length===e)?"active":""}})}).controller({About:["$rootScope","$http"].concat(function(t){return t.activeTab="about"})}),angular.module("comap",[]).factory({CoMapData:["$http"].concat(function(t){return{get:function(){return[{id:"TPQ-2153",name:"青潭國小",address:"北宜路二段８０號",village:"美潭里",remark:"1-7,9",osmdata:{name:"青潭國小",address:"80 北宜路二段"}},{id:"TPQ-2150",name:"格頭市民活動中心",address:"北宜路五段３號",village:"格頭里",remark:"全里"},{id:"TPQ-2179",name:"瑞芳國小",address:"中山路２號",village:"龍潭里",remark:"全里",place_id:87179326,osm_id:"way/156133370"}]},geocode:function(e,o){var a,r,n;return a=o.city,r=null!=(n=o.country)?n:"TW",t.get("https://nominatim.openstreetmap.org/search",{params:import$({city:a,country:r},{format:"json",addressdetails:1,street:e})})}}})}).controller({CoMapCtrl:["$scope","$sce","$materialSidenav","leafletData","CoMapData"].concat(function(t,e,o,a,r){var n;return t.toggleLeft=function(){return o("left").toggle()},import$(t,{center:{lat:24.5,lng:121.5,zoom:8},"default":{tileLayer:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",maxZoom:14,path:{weight:10,color:"#800000",opacity:1}}}),t.data=r.get("TPQ")[0],t.osmdata=(n=t.data.osmdata)?n:import$({},t.data),a.getMap().then(function(o){var a,n,c,i;return a="新北市",t.find=function(){return r.geocode(t.osmdata.name,{city:a}).success(function(o){var a,r,n;for(a=0,r=o.length;r>a;++a)n=o[a],n.edit_url=e.trustAsResourceUrl("https://www.openstreetmap.org/edit?"+n.osm_type+"="+n.osm_id);return t.nameResults=o}),r.geocode(t.osmdata.address,{city:a}).success(function(e){return t.addressResults=e}),t.data.street?r.geocode(t.osmdata.street,{city:a}).success(function(e){return t.streetResults=e}):void 0},c=function(t){var e;return e=/node/.exec(t)?"":"/full",$.ajax({url:"https://www.openstreetmap.org/api/0.6/"+t+e,dataType:"xml",success:function(t){var e,a;return(e=n)&&o.removeLayer(e),a=new L.OSM.DataLayer(t),o.fitBounds(a.getBounds()),setTimeout(function(){return a.addTo(o),n=a},1e3)}})},(i=t.data.osm_id)&&c(i),t.look=function(t){return c([t.osm_type,t.osm_id].join("/"))}})})}).controller({LeftCtrl:["$scope","$timeout","$materialSidenav"].concat(function(t,e,o){return t.close=function(){return o("left").close()}})}).controller({RightCtrl:["$scope","$timeout","$materialSidenav"].concat(function(t,e,o){return t.close=function(){return o("right").close()}})});